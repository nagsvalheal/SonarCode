<!--The lightning component is designed to retrieve and update caregiver details from the account object-->
<template>
	<!-- Strings are hard coded in this HTML file to comply with the mobile responsiveness-->
	<div class="target" data-scroll-target></div>
	<template if:true={updatePopup}>
		<div data-it-uid={userId} class="toast">
			<p class="para">
				<img class="img4" src={rightImg} />&nbsp;&nbsp;Your profile has been
				updated successfully.
			</p>
			<div class="notify">
				<button class="buttonclass btncls" type="button" onclick={handleClose}>
					&#x2715;
				</button>
			</div>
		</div>
	</template>
	<div class="flexcard">
		<div class="flexcone">
			<div>
				<h2 class="size">My Profile</h2>
				<!--Record edit form to update the caregiver details-->
				<lightning-record-edit-form object-api-name="Account" record-id={accname} onsubmit={handleSubmit}
					oncancel={handleCancel}>
					<div class="custom-div">
						<div class="input-div">
							<div class="slds-col">
								<div class="fieldwidth" id="1">
									<br />
									<h1 class="h1">Personal Information</h1>
									<br />

									<label for="FirstName" data-field="FirstName" class="input-label">First
										Name*</label>
									<lightning-input class="textInput" field-name="FirstName" data-field="FirstName"
										placeholder="Enter First Name" variant="label-hidden" value={firstName}
										onchange={handleNameChange} max-length="16" >
									</lightning-input>
									<span class="slds-form-element__help" if:true={firstNameErrorMessage}>
										<img src={warning} />{firstNameError}
									</span>
									<div class="slds-form-element__help" if:true={firstNameErrorMessageValid}>
										<img class="css" src={warning} width="12px" height="12px">
										<span class="slds-form-element__helps">Please enter a valid first name</span>
									</div>
								</div>
								<div class="input-div">
									<label for="LastName" data-field="LastName" class="input-label">Last Name*</label>
									<lightning-input class="textInput" field-name="LastName" data-field="LastName"
										placeholder="Enter Last Name" value={lastName} variant="label-hidden"
										onchange={handleLastNameChange}  maxlength="16" >
									</lightning-input>
									<span class="slds-form-element__help" if:true={lastNameErrorMessage}>
										<img src={warning} />{lastNameError}
									</span>
									<div class="slds-form-element__help" if:true={lastNameErrorMessageValid}>
										<img class="css" src={warning} width="12px" height="12px">
										<span class="slds-form-element__helps">Please enter a valid last name</span>
									</div>
								</div>
								<div class="input-div">
									<label for="Birthdate" data-field="Birthdate" class="input-label">Date of
										Birth*</label>
									<lightning-input field-name="BI_PSP_Birthdate__c" label="Date of Birth"
										onchange={ageCalculationEvent} value={birthDate} onkeydown={handleKeyDownThree}										data-field="Birthdate"
										class="textInput" variant="label-hidden" type="date"
										placeholder="DD.MM.YYYY" date-style="short"></lightning-input>
									<span if:true={minorerror} class="slds-form-element__help">
										<img src={warning} />{label.DATE_OF_BIRTH_ERR}</span>
									<span if:true={futureError} class="slds-form-element__help">
										<img src={warning} />{futuredateError}</span>
									<span if:true={majorError} class="slds-form-element__help">
										<img src={warning} />{majorDateError}</span>
									<span if:true={dobErrorMessage} class="slds-form-element__help">
										<img src={warning} />
										Date of birth field is required
									</span>
								</div>
								<div class="input-div">
									<label for="Relationship" data-field="Relationship" class="input-label">Relationship
										with {name}*</label>

									<lightning-combobox field-name="BI_PSPB_Relationship_to_Patient__c"
										name="CaregiverRelationship" placeholder="Select" data-field="Relationship"
										value={relationshipVal} options={leadPmc} onchange={relationshipEvent}
										variant="label-hidden" class="textInput">
									</lightning-combobox>

									<span class="slds-form-element__help" if:true={relationshipErrorMessage}>
										<img src={warning} />{relationshipError}
									</span>
								</div>
								<br />
								<h1 class="h1">Communication Details</h1>
								<br />

								<div class="input-div">
									<label for="Email" data-field="email" class="input-labelemail">E-mail*</label>
									<lightning-input class="textInput" disabled="false" field-name="PersonEmail"
										data-field="email" variant="label-hidden" value={personEmailVal}>
									</lightning-input>
									<span class="slds-form-element__help" if:true={emailErrorMessage}>
										<img src={warning} />{emailError}
									</span>
								</div>
								<!-- </div>  -->
								<template if:true={phoneVisbleField}>
									<div if:true={phoneVisbleField}>
									  <div class="input-div">
										<label
										  for="MobilePhone"
										  data-field="MobilePhone"
										  class="input-label"
										  >{pmc}</label
										>
										<lightning-input
										  field-name="Phone"
										  maxlength="16"
										  class="textInput"
										  variant="label-hidden"
										  data-field="MobilePhone"
										  placeholder="Enter Phone Number"
										  value={phoneRecord}
										  onchange={phoneChangeEvent}
										  onkeydown={handleKeyDown}
										  onpaste={handleKeyDown}
										>
										</lightning-input>
										<span
										  class="slds-form-element__help"
										  if:true={phoneErrorMessage}
										>
										  <img src={warning} />{label.PHONE_FIELD_ERR}
										</span>
									  </div>
									</div>
								  </template>
								<div class="input-div">
									<label for="PreferredMethodofCommunication"
										data-field="PreferredMethodofCommunication" class="input-label">Preferred Mode
										Of Communication*</label>

									<lightning-combobox options={preffer} value={communicationMode}
										onchange={handleCommunicationMethodChange} variant="label-hidden"
										class="textInput" data-field="PreferredMethodofCommunication"
										placeholder="Enter Preferred mode of communication"></lightning-combobox>
									<span class="slds-form-element__help" if:true={pcmErrorMessage}>
										<img src={warning} />{preferredMode}
									</span>
								</div>
							</div>
							<div class="btnc">
								<button class="save-button" onclick={handleSubmitDetail}>
									Save Changes
								</button>
							</div>
						</div>
						<br />
					</div>
				</lightning-record-edit-form>
			</div>
		</div>
	</div>
</template>